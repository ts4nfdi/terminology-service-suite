import{j as e}from"./index-ZCdkkhYt.js";import{aZ as V,R as x,aK as M,U as p}from"./storyArgs-AFjXh7XW.js";/* empty css                  */import{E as z}from"./icon_tip-DA644TT0.js";import{E as N}from"./icon-RvlT3YZ5.js";const y=!0;function W(t){return e.jsx(z,{type:"iInCircle",color:"subdued",content:t})}function Q(t,r){const n=Object.keys(r).map(o=>{const s=t.getLinkedEntities().getLabelForIri(o)||o;return s?"*"+r[o]+" ("+s+")":""}).join(`
`);return W(n)}function T(t,r,n,o=y,s){const l=r.getLabelForIri(n)||n.split("/").pop()||n,f=r.get(n),u=t.getOntologyId();if(t.getType()!=="ontology"&&n===(t==null?void 0:t.getIri()))return e.jsx("span",{className:"highlight",children:t.getLabel()});if(!f)return n.startsWith("http")?e.jsx("a",{className:"clickable",href:n,children:l}):e.jsx("span",{children:l});const h=f.definedBy?f.definedBy.filter(a=>a!==u):[],c=f.type?V(f.type):t.getType();return h.length===1?f.hasLocalDefinition?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"clickable",onClick:()=>{typeof s.onNavigateToEntity=="function"&&s.onNavigateToEntity(u,c,{iri:n,label:l})},children:l}),o?e.jsxs(e.Fragment,{children:[" ",e.jsx("button",{className:"no-decoration",onClick:()=>{typeof s.onNavigateToOntology=="function"&&s.onNavigateToOntology(h[0],c,{iri:n,label:l})},children:e.jsx("span",{className:"ontology-badge",children:h[0].toUpperCase()})})]}):e.jsx(e.Fragment,{})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"clickable",onClick:()=>{typeof s.onNavigateToEntity=="function"&&s.onNavigateToEntity(h[0],c,{iri:n,label:l})},children:l}),o?e.jsxs(e.Fragment,{children:[" ",e.jsx("button",{className:"no-decoration",onClick:()=>{typeof s.onNavigateToOntology=="function"&&s.onNavigateToOntology(h[0],c,{iri:n,label:l})},children:e.jsx("span",{className:"ontology-badge",children:h[0].toUpperCase()})})]}):e.jsx(e.Fragment,{})]}):h.length>1?f.hasLocalDefinition?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"clickable",onClick:()=>{typeof s.onNavigateToEntity=="function"&&s.onNavigateToEntity(u,c,{iri:n,label:l})},children:l}),o?e.jsxs(e.Fragment,{children:[" ",h.map(a=>e.jsx("button",{className:"no-decoration",onClick:()=>{typeof s.onNavigateToOntology=="function"&&s.onNavigateToOntology(a,c,{iri:n,label:l})},children:e.jsx("span",{className:"ontology-badge",children:a.toUpperCase()})},x()))]}):e.jsx(e.Fragment,{})]}):e.jsxs(e.Fragment,{children:[e.jsx("a",{className:"clickable",href:n,children:l}),o?e.jsxs(e.Fragment,{children:[" ",e.jsx("button",{className:"no-decoration",onClick:()=>{typeof s.onNavigateToDisambiguate=="function"&&s.onNavigateToDisambiguate(c,{iri:n,label:l})},children:e.jsxs("span",{className:"ontology-badge",children:[e.jsx(N,{type:"search",size:"s"})," ",h.length," ","ontologies"]})},x())]}):e.jsx(e.Fragment,{})]}):f.hasLocalDefinition?e.jsx(e.Fragment,{children:e.jsx("button",{className:"clickable",onClick:()=>{typeof s.onNavigateToEntity=="function"&&s.onNavigateToEntity(u,c,{iri:n,label:l})},children:l})}):parseInt(f.numAppearsIn)>0?e.jsxs(e.Fragment,{children:[e.jsx("a",{className:"clickable",href:n,children:l}),o?e.jsxs(e.Fragment,{children:[" ",e.jsx("button",{className:"no-decoration",onClick:()=>{typeof s.onNavigateToDisambiguate=="function"&&s.onNavigateToDisambiguate(c,{iri:n,label:l})},children:e.jsxs("span",{className:"ontology-badge",children:[e.jsx(N,{type:"search",size:"s"})," ",f.numAppearsIn," ",parseInt(f.numAppearsIn)>1?"ontologies":"ontology"]})},x())]}):e.jsx(e.Fragment,{})]}):e.jsx(e.Fragment,{children:e.jsx("a",{className:"clickable",href:f.url||n,children:l})})}function m(t,r,n,o=y,s){let l=e.jsx(e.Fragment,{});if(r=r.mergeWith(n.linkedEntities),typeof n=="string")l=T(t,r,n,o,s);else if(typeof n=="object"&&!Array.isArray(n)&&Array.isArray(n.type)&&n.type.indexOf("reification")!==-1)l=_(t,M.fromJson(n)[0],o,s);else{const f=n["http://www.w3.org/2002/07/owl#someValuesFrom"],u=n["http://www.w3.org/2002/07/owl#allValuesFrom"],h=p(n["http://www.w3.org/2002/07/owl#intersectionOf"]),c=p(n["http://www.w3.org/2002/07/owl#unionOf"]),a=n["http://www.w3.org/2002/07/owl#hasValue"],g=n["http://www.w3.org/2002/07/owl#minCardinality"]||n["http://www.w3.org/2002/07/owl#minQualifiedCardinality"],j=n["http://www.w3.org/2002/07/owl#maxCardinality"]||n["http://www.w3.org/2002/07/owl#maxQualifiedCardinality"],O=n["http://www.w3.org/2002/07/owl#cardinality"]||n["http://www.w3.org/2002/07/owl#qualifiedCardinality"],S=n["http://www.w3.org/2002/07/owl#hasSelf"],C=n["http://www.w3.org/2002/07/owl#complementOf"],L=p(n["http://www.w3.org/2002/07/owl#oneOf"]),k=n["http://www.w3.org/2002/07/owl#inverseOf"],w=n["http://www.w3.org/2002/07/owl#onProperty"],I=n["http://www.w3.org/2002/07/owl#onDatatype"];if(I){const i=[m(t,r,I,o,s)],d=p(n["http://www.w3.org/2002/07/owl#withRestrictions"]);if(d.length>0){i.push(e.jsx(e.Fragment,{children:"["}));let F=!0;for(const b of d){F?F=!1:i.push(e.jsx(e.Fragment,{children:", "}));const A=b["http://www.w3.org/2001/XMLSchema#minExclusive"],D=b["http://www.w3.org/2001/XMLSchema#minInclusive"],J=b["http://www.w3.org/2001/XMLSchema#maxExclusive"],X=b["http://www.w3.org/2001/XMLSchema#maxInclusive"];A?i.push(e.jsxs(e.Fragment,{children:["> ",A]})):D?i.push(e.jsxs(e.Fragment,{children:["≥ ",D]})):J?i.push(e.jsxs(e.Fragment,{children:["< ",J]})):X&&i.push(e.jsxs(e.Fragment,{children:["≤ ",X]}))}i.push(e.jsx(e.Fragment,{children:"]"}))}l=e.jsx(e.Fragment,{children:i.map(F=>e.jsx("span",{children:F},x()))})}else if(f)l=e.jsxs(e.Fragment,{children:[m(t,r,w,o,s),e.jsx("i",{style:{color:"purple"},children:" some "}),m(t,r,p(f)[0],o,s)]});else if(u)l=e.jsxs(e.Fragment,{children:[m(t,r,w,o,s),e.jsx("i",{style:{color:"purple"},children:" only "}),m(t,r,p(u)[0],o,s)]});else if(h.length>0){const i=[e.jsx("span",{className:"text-neutral-default",children:"("},x())];for(const d of h)i.length>1&&i.push(e.jsx("i",{children:" and "})),i.push(m(t,r,d,o,s));i.push(e.jsx("span",{className:"text-neutral-default",children:")"})),l=e.jsx("span",{children:i.map(d=>e.jsx("span",{children:d},x()))})}else if(c.length>0){const i=[e.jsx("span",{className:"text-neutral-default",children:"("},x())];for(const d of c)i.length>1&&i.push(e.jsx("i",{children:" or "})),i.push(m(t,r,d,o,s));i.push(e.jsx("span",{className:"text-neutral-default",children:")"})),l=e.jsx("span",{children:i.map(d=>e.jsx("span",{children:d},x()))})}else if(a)l=e.jsxs(e.Fragment,{children:[m(t,r,w,o,s),e.jsx("i",{style:{color:"purple"},children:" value "}),m(t,r,p(a)[0],o,s)]});else if(g)l=e.jsxs(e.Fragment,{children:[m(t,r,w,o,s),e.jsx("i",{style:{color:"purple"},children:" min "}),m(t,r,p(g)[0],o,s)]});else if(j)l=e.jsxs(e.Fragment,{children:[m(t,r,w,o,s),e.jsx("i",{style:{color:"purple"},children:" max "}),m(t,r,p(j)[0],o,s)]});else if(O)l=e.jsxs(e.Fragment,{children:[m(t,r,w,o,s),e.jsx("i",{style:{color:"purple"},children:" exactly "}),m(t,r,p(O)[0],o,s)]});else if(S)l=e.jsxs(e.Fragment,{children:[m(t,r,w,o,s),e.jsx("i",{style:{color:"purple"},children:" Self "}),m(t,r,p(S)[0],o,s)]});else if(C)l=e.jsxs(e.Fragment,{children:[e.jsx("i",{children:"not "}),m(t,r,p(C)[0],o,s)]});else if(L.length>0){const i=[e.jsx("span",{className:"text-neutral-default",children:"{"},x())];for(const d of L)i.length>1&&i.push(e.jsx("span",{className:"text-neutral-default",children:", "},x())),i.push(m(t,r,d,o,s));i.push(e.jsx("span",{className:"text-neutral-default",children:"}"})),l=e.jsx("span",{children:i.map(d=>e.jsx("span",{children:d},x()))})}else k&&(l=e.jsxs(e.Fragment,{children:[e.jsx("i",{style:{color:"purple"},children:"inverse "}),e.jsx("span",{className:"text-neutral-default",children:"("},x()),m(t,r,k,o,s),e.jsx("span",{className:"text-neutral-default",children:")"},x())]}))}return l}function Z(t,r,n,o=y,s){return e.jsx(e.Fragment,{children:n.length===1?e.jsx("p",{children:m(t,t.getLinkedEntities(),n[0],o,s)}):e.jsx("ul",{children:n.map(l=>e.jsx("li",{children:m(t,t.getLinkedEntities(),l,o,s)},x()))})})}function U(t,r,n,o=y,s){const l=[];if(n)for(const c of Object.keys(n.linkedEntities))for(let a=r.indexOf(c,0);a!==-1;a=r.indexOf(c,a))l.push({start:a,end:a+c.length,link:T(t,n,c,o,s)}),a+=c.length;const f=/[A-z]+:\/\/[^\s]+/g;for(let c=f.exec(r);c;c=f.exec(r)){const a=c[0];l.push({start:c.index,end:c.index+a.length,link:e.jsx("span",{children:e.jsx("a",{className:"clickable",href:a,children:a})},x())})}l.sort((c,a)=>c.start-a.start);e:for(let c=0;c<l.length;){for(let a=c+1;a<l.length;++a){const g=l[c],j=l[a];if(g!==j&&g.end>=j.start&&j.end>=g.start){g.end-g.start<j.end-j.start?l.splice(c,1):l.splice(a,1);continue e}}++c}if(l.length===0)return e.jsx(e.Fragment,{children:r});const u=[];let h=0;for(const c of l)u.push(e.jsx("span",{children:r.substring(h,c.start)},x())),u.push(c.link),h=c.end;return u.push(e.jsx("span",{children:r.slice(h)},x())),e.jsx(e.Fragment,{children:u})}function _(t,r,n=y,o){function s(l){const f=t.getLinkedEntities();if(Object.keys(f.linkedEntities).length==0){if(typeof l.value=="string")return U(t,l.value.toString(),void 0,n,o);if(typeof l.value=="object"&&l.value["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]!=null)switch(l.value["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]){case"http://www.w3.org/2008/05/skos-xl#Label":const u=l.value["http://www.w3.org/2008/05/skos-xl#literalForm"].value;return e.jsx(e.Fragment,{children:u});case"http://purl.org/vocab/changeset/schema#ChangeSet":const h=l.value["http://purl.org/vocab/changeset/schema#changeReason"].value,c=l.value["http://purl.org/vocab/changeset/schema#createdDate"].value;return e.jsxs(e.Fragment,{children:[c,": ",h]});default:return console.error(`Unknown rdf syntax type: ${l.value["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]}`),e.jsx(e.Fragment,{children:JSON.stringify(l.value)})}else return console.error(`Unknown entry information format: ${l}`),e.jsx(e.Fragment,{children:JSON.stringify(l.value)})}else return f.get(l.value)?T(t,f,l.value,n,o):typeof l.value!="string"?t.getType()=="ontology"?e.jsx(e.Fragment,{children:JSON.stringify(l.value)}):m(t,f,l.value,n,o):U(t,l.value.toString(),f,n,o)}return e.jsxs(e.Fragment,{children:[s(r)," ",r.hasMetadata()&&Q(t,r.getMetadata())]})}export{T as a,m as b,W as c,Z as d,_ as g};
